<!--
  Generated template for the StatisticPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<headOn></headOn>

<ion-content padding>
  <ion-item *ngIf='role>0'>
    <ion-label>{{'stat_user'|translate}}</ion-label>
    <ion-select [(ngModel)]="userData.name" (ionChange)=changeUser($event)>
      <ion-option *ngFor="let l of userList"  [value]='l.id'>{{l.name}}</ion-option>
    </ion-select>
  </ion-item>
  <ion-item>
    <ion-label>{{'stat_month'|translate}}</ion-label>
    <ion-select [(ngModel)]="monthData.name" (ionChange)=changeMonth($event)>
      <ion-option *ngFor="let l of monthData" [selected]='l.selected' [value]='l.id'>{{l.name}}</ion-option>
    </ion-select>
  </ion-item>
  <ion-item>
    <ion-label>{{'stat_year'|translate}}</ion-label>
    <ion-select [(ngModel)]="yearData.name" (ionChange)=changeYear($event)>
      <ion-option *ngFor="let l of yearData" [selected]='l.selected' [value]='l.name'>{{l.name}}</ion-option>
    </ion-select>
  </ion-item>
  <button ion-button block (click)='search()'>{{'search_button'|translate}}</button>
  <div class="blue-parallel ">{{'sum_hours'|translate}}
    <span float-right>{{iter|stat}}</span>
  </div>
  <div class="blue-parallel" *ngIf='differ>=0||differ==undefined'>{{'underworked'|translate}}
    <span float-right>{{differ|stat}}</span>
  </div>
  <div class="blue-parallel" *ngIf='differ<0'>{{'overworked'|translate}}
      <span float-right>{{differ|stat}}</span>
    </div>
  <!--<div class="blue-parallel ">{{'sum_issue'|translate}}</div>-->
  <table class="table-stat" *ngIf='table'>
    <thead>
      <tr class="background">
        <th>â„–</th>
        <th>{{'date'|translate}}</th>
        <th>{{'day'|translate}}</th>
        <th>{{'time'|translate}}</th>
        <th>{{'break'|translate}}</th>
      </tr>
    </thead>
    <tbody class="statisticTable">
      <tr *ngFor='let item of userData.days; let i = index' [attr.data-index]="i">
        <td>{{i+1}}</td>
        <td>{{item.date}}</td>
        <td>{{item.day}}</td>
        <td>{{item.time|stat}}</td>
        <td>{{item.break|stat}}</td>
      </tr>
    </tbody>
  </table>
</ion-content>